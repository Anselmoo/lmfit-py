
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Release Notes &#8212; Non-Linear Least-Squares Minimization and Curve-Fitting for Python</title>
    <link rel="stylesheet" href="_static/lmfitdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Using Mathematical Constraints" href="constraints.html" />
  <script type="text/x-mathjax-config">
     MathJax.Hub.Config({
        "TeX": {Macros: {AA : "{\\unicode{x212B}}"}},
        "HTML-CSS": {scale: 90}
  });</script>

  </head><body>
<div>
<table border=0>
  <tr><td></td><td width=85% padding=5 align=left>
       <a href="index.html" style="color: #157"> <font size=+3>LMFIT</font></a>
     </td>
     <td width=7% align=left>
         <a href="contents.html" style="color: #882222">
         <font size+=1>Contents</font></a> </td>
     <td width=7% align=left>
          <a href="installation.html" style="color: #882222">
          <font size+=1>Download</font></a></td>
     <td></td>
  </tr>
  <tr><td></td><td width=75% padding=5 align=left>
        <a href="index.html" style="color: #157"> <font size=+2>
	Non-Linear Least-Squares Minimization and Curve-Fitting for Python</font></a>
     </td>
     <td width=7% align=left>
         <a href="faq.html" style="color: #882222">
         <font size+=1>FAQ</font></a> </td>
     <td width=7% align=left>
        <a href="https://github.com/lmfit/lmfit-py/" style="color: #882222">
         <font size+=1>Develop</font></a></td>
     <td></td>
  </tr>
</table>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="constraints.html" title="Using Mathematical Constraints"
             accesskey="P">previous</a> |</li>
   <li>[<a href="intro.html">intro</a>|</li>
   <li><a href="parameters.html">parameters</a>|</li>
   <li><a href="fitting.html"> minimize</a>|</li>
   <li><a href="model.html"> model</a>|</li>
   <li><a href="builtin_models.html"> built-in models</a>|</li>
   <li><a href="confidence.html">confidence intervals</a>|</li>
   <li><a href="bounds.html">bounds</a>|</li>
   <li><a href="constraints.html">constraints</a>]</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Release Notes</a><ul>
<li><a class="reference internal" href="#version-0-9-10-release-notes">Version 0.9.10 Release Notes</a></li>
<li><a class="reference internal" href="#version-0-9-9-release-notes">Version 0.9.9 Release Notes</a></li>
<li><a class="reference internal" href="#version-0-9-6-release-notes">Version 0.9.6 Release Notes</a></li>
<li><a class="reference internal" href="#version-0-9-5-release-notes">Version 0.9.5 Release Notes</a></li>
<li><a class="reference internal" href="#version-0-9-4-release-notes">Version 0.9.4 Release Notes</a></li>
<li><a class="reference internal" href="#version-0-9-3-release-notes">Version 0.9.3 Release Notes</a></li>
<li><a class="reference internal" href="#version-0-9-0-release-notes">Version 0.9.0 Release Notes</a><ul>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#impact">Impact</a></li>
<li><a class="reference internal" href="#discussion">Discussion</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="constraints.html"
                        title="previous chapter">Using Mathematical Constraints</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/whatsnew.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="release-notes">
<span id="whatsnew-chapter"></span><h1>Release Notes<a class="headerlink" href="#release-notes" title="Permalink to this headline">¶</a></h1>
<p>This section discusses changes between versions, especially changes
significant to the use and behavior of the library.  This is not meant
to be a comprehensive list of changes.  For such a complete record,
consult the <a class="reference external" href="https://github.com/lmfit/lmfit-py">lmfit GitHub repository</a>.</p>
<div class="section" id="version-0-9-10-release-notes">
<h2>Version 0.9.10 Release Notes<a class="headerlink" href="#version-0-9-10-release-notes" title="Permalink to this headline">¶</a></h2>
<p>Two new global algorithms were added: basinhopping and AMPGO.
Basinhopping wraps the method present in <cite>scipy</cite>, and more information
can be found in the documentation (<a class="reference internal" href="fitting.html#lmfit.minimizer.Minimizer.basinhopping" title="lmfit.minimizer.Minimizer.basinhopping"><code class="xref py py-func docutils literal notranslate"><span class="pre">basinhopping()</span></code></a>
and <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.basinhopping.html">scipy.optimize.basinhopping</a>).
The Adaptive Memory Programming for Global Optimization (AMPGO) algorithm
was adapted from Python code written by <a class="reference external" href="http://infinity77.net/global_optimization/index.html">Andrea Gavana</a>. A more detailed
explanation of the algorithm is available in the <a class="reference external" href="http://leeds-faculty.colorado.edu/glover/fred%20pubs/416%20-%20AMP%20(TS)%20for%20Constrained%20Global%20Opt%20w%20Lasdon%20et%20al%20.pdf">AMPGO paper</a> and specifics
for lmfit can be found in the <a class="reference internal" href="fitting.html#lmfit.minimizer.Minimizer.ampgo" title="lmfit.minimizer.Minimizer.ampgo"><code class="xref py py-func docutils literal notranslate"><span class="pre">ampgo()</span></code></a> function.</p>
<p>Lmfit uses the external uncertainties (<a class="reference external" href="https://github.com/lebigot/uncertainties">https://github.com/lebigot/uncertainties</a>)
package (available on PyPI), instead of distributing its own fork.</p>
<p>An <cite>AbortFitException</cite> is now raised when the fit is aborted by the user (i.e., by
using <cite>iter_cb</cite>).</p>
<p>Bugfixes:</p>
<ul class="simple">
<li>all exceptions are allowed when trying to import matplotlib</li>
<li>simplify and fix corner-case errors when testing closeness of large integers</li>
</ul>
</div>
<div class="section" id="version-0-9-9-release-notes">
<span id="whatsnew-099-label"></span><h2>Version 0.9.9 Release Notes<a class="headerlink" href="#version-0-9-9-release-notes" title="Permalink to this headline">¶</a></h2>
<p>Lmfit now uses the asteval (<a class="reference external" href="https://github.com/newville/asteval">https://github.com/newville/asteval</a>) package
instead of distributing its own copy. The minimum required asteval version
is 0.9.12, which is available on PyPI. If you see import errors related to
asteval, please make sure that you actually have the latest version installed.</p>
</div>
<div class="section" id="version-0-9-6-release-notes">
<span id="whatsnew-096-label"></span><h2>Version 0.9.6 Release Notes<a class="headerlink" href="#version-0-9-6-release-notes" title="Permalink to this headline">¶</a></h2>
<p>Support for SciPy 0.14 has been dropped: SciPy 0.15 is now required.  This
is especially important for lmfit maintenance, as it means we can now rely
on SciPy having code for differential evolution and do not need to keep a
local copy.</p>
<p>A brute force method was added, which can be used either with
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Minimizer.brute()</span></code> or using the <cite>method=’brute’</cite> option to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Minimizer.minimize()</span></code>.  This method requires finite bounds on
all varying parameters, or that parameters have a finite
<cite>brute_step</cite> attribute set to specify the step size.</p>
<p>Custom cost functions can now be used for the scalar minimizers using the
<cite>reduce_fcn</cite> option.</p>
<p>Many improvements to documentation and docstrings in the code were made.
As part of that effort, all API documentation in this main Sphinx
documentation now derives from the docstrings.</p>
<p>Uncertainties in the resulting best-fit for a model can now be calculated
from the uncertainties in the model parameters.</p>
<p>Parameters have two new attributes: <cite>brute_step</cite>, to specify the step
size when using the <cite>brute</cite> method, and <cite>user_data</cite>, which is unused but
can be used to hold additional information the user may desire.  This will
be preserved on copy and pickling.</p>
<p>Several bug fixes and cleanups.</p>
<p>Versioneer was updated to 0.18.</p>
<p>Tests can now be run either with nose or pytest.</p>
</div>
<div class="section" id="version-0-9-5-release-notes">
<span id="whatsnew-095-label"></span><h2>Version 0.9.5 Release Notes<a class="headerlink" href="#version-0-9-5-release-notes" title="Permalink to this headline">¶</a></h2>
<p>Support for Python 2.6 and SciPy 0.13 has been dropped.</p>
</div>
<div class="section" id="version-0-9-4-release-notes">
<span id="whatsnew-094-label"></span><h2>Version 0.9.4 Release Notes<a class="headerlink" href="#version-0-9-4-release-notes" title="Permalink to this headline">¶</a></h2>
<p>Some support for the new <cite>least_squares</cite> routine from SciPy 0.17 has been
added.</p>
<p>Parameters can now be used directly in floating point or array expressions,
so that the Parameter value does not need <cite>sigma = params[‘sigma’].value</cite>.
The older, explicit usage still works, but the docs, samples, and tests
have been updated to use the simpler usage.</p>
<p>Support for Python 2.6 and SciPy 0.13 is now explicitly deprecated and wil
be dropped in version 0.9.5.</p>
</div>
<div class="section" id="version-0-9-3-release-notes">
<span id="whatsnew-093-label"></span><h2>Version 0.9.3 Release Notes<a class="headerlink" href="#version-0-9-3-release-notes" title="Permalink to this headline">¶</a></h2>
<p>Models involving complex numbers have been improved.</p>
<p>The <cite>emcee</cite> module can now be used for uncertainty estimation.</p>
<p>Many bug fixes, and an important fix for performance slowdown on getting
parameter values.</p>
<p>ASV benchmarking code added.</p>
</div>
<div class="section" id="version-0-9-0-release-notes">
<span id="whatsnew-090-label"></span><h2>Version 0.9.0 Release Notes<a class="headerlink" href="#version-0-9-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This upgrade makes an important, non-backward-compatible change to the way
many fitting scripts and programs will work.  Scripts that work with
version 0.8.3 will not work with version 0.9.0 and vice versa.  The change
was not made lightly or without ample discussion, and is really an
improvement.  Modifying scripts that did work with 0.8.3 to work with 0.9.0
is easy, but needs to be done.</p>
<div class="section" id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h3>
<p>The upgrade from 0.8.3 to 0.9.0 introduced the <code class="xref py py-class docutils literal notranslate"><span class="pre">MinimizerResult</span></code>
class (see <a class="reference internal" href="fitting.html#fit-results-label"><span class="std std-ref">MinimizerResult – the optimization result</span></a>) which is now used to hold the return
value from <code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Minimizer.minimize()</span></code>.  This returned
object contains many goodness of fit statistics, and holds the optimized
parameters from the fit.  Importantly, the parameters passed into
<code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Minimizer.minimize()</span></code> are no longer modified by
the fit. Instead, a copy of the passed-in parameters is made which is
changed and returns as the <code class="xref py py-attr docutils literal notranslate"><span class="pre">params</span></code> attribute of the returned
<code class="xref py py-class docutils literal notranslate"><span class="pre">MinimizerResult</span></code>.</p>
</div>
<div class="section" id="impact">
<h3>Impact<a class="headerlink" href="#impact" title="Permalink to this headline">¶</a></h3>
<p>This upgrade means that a script that does:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_pars</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">()</span>
<span class="n">my_pars</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span>    <span class="n">value</span><span class="o">=</span><span class="mf">300.0</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">my_pars</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span>  <span class="mf">5.0</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">my_pars</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;decay&#39;</span><span class="p">,</span>  <span class="n">value</span><span class="o">=</span>  <span class="mf">1.0</span><span class="p">,</span> <span class="n">vary</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">minimize</span><span class="p">(</span><span class="n">objfunc</span><span class="p">,</span> <span class="n">my_pars</span><span class="p">)</span>
</pre></div>
</div>
<p>will still work, but that <code class="docutils literal notranslate"><span class="pre">my_pars</span></code> will <strong>NOT</strong> be changed by the fit.
Instead, <code class="docutils literal notranslate"><span class="pre">my_pars</span></code> is copied to an internal set of parameters that is
changed in the fit, and this copy is then put in <code class="docutils literal notranslate"><span class="pre">result.params</span></code>.  To
look at fit results, use <code class="docutils literal notranslate"><span class="pre">result.params</span></code>, not <code class="docutils literal notranslate"><span class="pre">my_pars</span></code>.</p>
<p>This has the effect that <code class="docutils literal notranslate"><span class="pre">my_pars</span></code> will still hold the starting parameter
values, while all of the results from the fit are held in the <code class="docutils literal notranslate"><span class="pre">result</span></code>
object returned by <code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code>.</p>
<p>If you want to do an initial fit, then refine that fit to, for example, do
a pre-fit, then refine that result different fitting method, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result1</span> <span class="o">=</span> <span class="n">minimize</span><span class="p">(</span><span class="n">objfunc</span><span class="p">,</span> <span class="n">my_pars</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;nelder&#39;</span><span class="p">)</span>
<span class="n">result1</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;decay&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">vary</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">result2</span> <span class="o">=</span> <span class="n">minimize</span><span class="p">(</span><span class="n">objfunc</span><span class="p">,</span> <span class="n">result1</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;leastsq&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>and have access to all of the starting parameters <code class="docutils literal notranslate"><span class="pre">my_pars</span></code>, the result of the
first fit <code class="docutils literal notranslate"><span class="pre">result1</span></code>, and the result of the final fit <code class="docutils literal notranslate"><span class="pre">result2</span></code>.</p>
</div>
<div class="section" id="discussion">
<h3>Discussion<a class="headerlink" href="#discussion" title="Permalink to this headline">¶</a></h3>
<p>The main goal for making this change were to</p>
<ol class="arabic simple">
<li>give a better return value to <code class="xref py py-func docutils literal notranslate"><span class="pre">minimize()</span></code> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Minimizer.minimize()</span></code> that can hold all of the information
about a fit.  By having the return value be an instance of the
<code class="xref py py-class docutils literal notranslate"><span class="pre">MinimizerResult</span></code> class, it can hold an arbitrary amount of
information that is easily accessed by attribute name, and even
be given methods.  Using objects is good!</li>
<li>To limit or even eliminate the amount of “state information” a
<code class="xref py py-class docutils literal notranslate"><span class="pre">Minimizer</span></code> holds.  By state information, we mean how much of
the previous fit is remembered after a fit is done.  Keeping (and
especially using) such information about a previous fit means that
a <code class="xref py py-class docutils literal notranslate"><span class="pre">Minimizer</span></code> might give different results even for the same
problem if run a second time.  While it’s desirable to be able to
adjust a set of <code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code> re-run a fit to get an improved
result, doing this by changing an internal attribute
(<code class="xref py py-attr docutils literal notranslate"><span class="pre">Minimizer.params</span></code>) has the undesirable side-effect of not
being able to “go back”, and makes it somewhat cumbersome to keep
track of changes made while adjusting parameters and re-running fits.</li>
</ol>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="constraints.html" title="Using Mathematical Constraints"
             >previous</a> |</li>
   <li>[<a href="intro.html">intro</a>|</li>
   <li><a href="parameters.html">parameters</a>|</li>
   <li><a href="fitting.html"> minimize</a>|</li>
   <li><a href="model.html"> model</a>|</li>
   <li><a href="builtin_models.html"> built-in models</a>|</li>
   <li><a href="confidence.html">confidence intervals</a>|</li>
   <li><a href="bounds.html">bounds</a>|</li>
   <li><a href="constraints.html">constraints</a>]</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Matthew Newville, The University of Chicago, Till Stensitzki, Freie Universitat Berlin.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>